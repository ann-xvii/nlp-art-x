
// Controller before a person is logged in

(function(){

	angular
		.module('app')
		.controller('MainController', MainController);

	MainController.$inject = ['PostsFactory', 'ipCookie', '$http', '$sce'];


	function MainController(PostsFactory, ipCookie, $http, $sce){

		var self = this;
		
		self.controllertest = "test yay";
		// Create PostFactory as an object
		self.Post = new PostsFactory();
		self.id = ipCookie('id');

		self.addFavorite = function () {
			console.log("I been clicked yeaheeee yayeee!");
		}
		
		self.sentiment_analysis = function(){
			console.log("Clicked, sentiment_analysis!!! w00t!");
			var word_soup = [];
			$http({
			    url: "https://sentinelprojects-skyttle20.p.mashape.com/",
			    method: "POST",
			    headers: { "X-Mashape-Key": "<%= ENV['MASHAPE_KEY'] %>", "Content-Type": "application/x-www-form-urlencoded", "Accept": "application/json"},
			    data: $.param({"text": "The main Neoclassical movement coincided with the 18th century Age of Enlightenment, and continued into the early 19th century, latterly competing with Romanticism" , "annotate": "1", "keywords": "1", "lang": "en", "sentiment": "1" })
			  })
			.success(function(data, status, header, config){
				console.log(data);
			});
		}

		// defined in model as search input
		self.artinput;
		

		self.searchArt = function (){

		    var API_SEARCH = "https://api.collection.cooperhewitt.org/rest/?method=cooperhewitt.search.collection&access_token=" + '<%= ENV['API_TOKEN'] %>' + "&query=" + self.artinput + "&has_images=1&page=1&per_page=10";
		    console.log(API_SEARCH);
		    $http
		        .get(API_SEARCH)
		        .success(function(data, status, header, config){
		            self.items = data;
		            console.log(self.items);
		            //console.log(self.items.objects);
		            self.artinput = null;

		            //self.trustLink = $sce.trustAsResourceUrl(self.items.objects.url);
		            self.trustLink = $sce.trustAsResourceUrl(self.items.objects.url);

		            //console.log(self.items.objects);
		        });
		}



		// self.sentiment_analysis = function(){
		// 	var word_soup = [];

		// 	$http.
		// 		get({
		// 	    url: "https://sentinelprojects-skyttle20.p.mashape.com/",
		// 	    method: "POST",
		// 	    headers: { "X-Mashape-Key": MASHAPE_KEY, "Content-Type": "application/x-www-form-urlencoded", "Accept": "application/json"},
		// 	    data: $.param({"text": "The main Neoclassical movement coincided with the 18th century Age of Enlightenment, and continued into the early 19th century, latterly competing with Romanticism" , "annotate": "0", "keywords": "1", "lang": "en", "sentiment": "0" })
		// 	  }).success(function(data, status, header, config){

		// 	  	console.log("I've been clicked!!!");
		// 	  	console.log(data);
		// 	  }
			  	
		// 	);



		// // }
		
		



		
								


	}

})();